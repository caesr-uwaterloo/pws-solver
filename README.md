# Split Point Solver

## Running Solver

This script takes a graph as input and solves for the split points using each
of the available algorithms.
The usage is as follows:

```bash
solver.py -i <graph>
```

Dependencies:
  - `<graph>` : A `.graph` file encoding the CFG.

## Generating Graph Inputs

The `.graph` format encodes the CFG in the following adjacency list format:

```
<source node> <execution time> <desination node 1> <desination node 2> ...
```

One way to generate inputs for the solver is by using the script `src/extract.py`.
The script parses the gem5 execution log and HIP assembly file to extract the
CFG of a benchmark.
The usage is as follows:

```bash
extract.py -i <asm> [-l <log>]
```

Dependencies:
  - `<asm>` : This is the GCN assembly code generated by HIP.
  It contains all basic block annotations and instructions executed by the kernel(s) and is generated by the HIP compiler using the `-save-temps` flag.
  - `<log>` : This is the output generated by gem5 when running the HIP benchmark using the `WavefrontSplit` and `IPT` debug flags. 
  It contains the address for each instruction and the execution time between instrumentation points, which we extract to determine basic block execution times.

Outputs:
  - `<input>-XX.graph` : A `.graph` file encoding the CFG.
  - `<input>-XX.png` : A plot of the graph structure annotated with basic block WCETs as weights.